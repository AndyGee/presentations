<!DOCTYPE html>
<html class=''>
  <head>
    <meta charset='utf-8' />
    <title>Presentations &#183;</title>
    <meta content='width=device-width, initial-scale=1.0' name='viewport' />
    <link href='/presentations/stylesheets/screen.css' rel='stylesheet' type='text/css' />
    <link href='/presentations/stylesheets/reveal.css' rel='stylesheet' />
    <script src='/presentations/javascripts/jquery.min.js' type='text/javascript'></script>
    <!--[if lt IE 9]>
      <script src='#{site.base_url}/javascripts/html5.js' type='text/javascript'></script>
    <![endif]-->
  </head>
  <body class='view'>
    <script type='text/javascript'>
  $(function() {
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,
        // Display a presentation progress bar
        progress: true,
        // If true; each slide will be pushed to the browser history
        history: true,
        // Loops the presentation, defaults to false
        loop: false,
        // Flags if mouse wheel navigation should be enabled
        mouseWheel: true,
        // Apply a 3D roll to links on hover
        rollingLinks: true,
        // UI style
        theme: 'default', // default/neon
        // Transition style
        transition: 'default' // default/cube/page/concave/linear(2d)
      });
  });
</script>
<div class='reveal'>
  <div class='slides'>
    <section>
  <h1>Code Highlight Test</h1>
</section>
<section data-state='code'>
  <div class='row'>
    <pre style='background-color:#999;'><code id='code1' style='background-color:#999;'>@RunWith(Arquillian.class)&#x000A;    public class ClusteredCacheTestCase&#x000A;    {&#x000A;        @Deployment(name = "dep.active-1")&#x000A;        @TargetsContainer("container.active-1")&#x000A;        public static WebArchive createTestDeployment()&#x000A;        {&#x000A;            return Deployments.createActiveClient("test-1.war");&#x000A;        }&#x000A;    &#x000A;        @Deployment(name = "dep.active-2")&#x000A;        @TargetsContainer("container.active-2")&#x000A;        public static WebArchive createTestDeployment2()&#x000A;        {&#x000A;            return Deployments.createActiveClient("test-2.war");&#x000A;        }&#x000A;    &#x000A;        @Inject&#x000A;        private Cache<String, Integer> cache;&#x000A;    &#x000A;        @Test @InSequence(1) @OperateOnDeployment("dep.active-1")&#x000A;        public void callActive1() throws Exception&#x000A;        {&#x000A;            int count = incrementCache(cache);&#x000A;            System.out.println("Cache incremented, current count: " + count);&#x000A;            Assert.assertEquals(1, count);&#x000A;        }&#x000A;    &#x000A;        @Test @RunAsClient @InSequence(6) @OperateOnDeployment("dep.active-2")&#x000A;        public void callActive6(@ArquillianResource URL baseURL) throws Exception&#x000A;        {&#x000A;            int count = readInt(baseURL.openStream());&#x000A;            System.out.println("Cache incremented, current count: " + count);&#x000A;            Assert.assertEquals(6, count);&#x000A;        }&#x000A;    }</code></pre>
    <div class='fragment' data-prettify='code1' data-prettify_lines='0:0'></div>
    <div class='fragment' data-prettify='code1' data-prettify_lines='3:8'></div>
    <div class='fragment' data-prettify='code1' data-prettify_lines='10:15'></div>
    <div class='fragment' data-prettify='code1' data-prettify_lines='17:18'></div>
    <div class='fragment' data-prettify='code1' data-prettify_lines='20:26'></div>
    <div class='fragment' data-prettify='code1' data-prettify_lines='28:34'></div>
  </div>
</section>
<script>
  $(function() { 
      show_lines = function (event) {
          $(event.fragment).each(function(count, elem) {
              var code = $(this);
              highlight_fragment(code);
          })
      };
  
      highlight_fragment = function (code) {
          var data_prettify = code.attr('data-prettify')
          var data_prettify_lines = code.attr('data-prettify_lines')
          if(data_prettify != undefined) {
              var code_lines = data_prettify_lines.split(':')
              var from = code_lines[0];
              var to = code_lines[1];
  
              var new_lines = ""
  
              var code_block = $('#' + data_prettify);
  
              var orig_code_id = 'code_' + data_prettify
              var orig_code = $('#' + orig_code_id)
              var text = ''
              if(orig_code.length == 0) {
                  $('body').append('<' + 'code id="' + orig_code_id + '" style="display:none;"' + '>' + code_block.html() + '</' + 'code' + '>');
                  text = code_block.html();
              }
              else {
                  text = orig_code.html()
              }
  
  
              var text_lines = text.split('\n');
              var between = false;
              var padding = 0;
              for(var i = 0; i < text_lines.length; i++) {
                  line = text_lines[i]
                  if(i == from) {
                      between = true;
                      padding = determine_left_padding(line);
  
                      new_line = line.substring(padding);
                      new_lines += '<' + 'pre' + ' class="prettify" style="background-color:#eee">\n'
                      new_lines += ('<' + 'code' + ' id="highlight" class="prettify" style="background-color:#eee">' +new_line+ '\n')
                  }
                  else {
                      new_lines += (between ? line.substring(padding):line) + '\n'
                  }
                  if(i == to) {
                      between = false;
                      new_lines += '</code></pre>'
                  }
              }
  
              code_block.html(new_lines);
              prettify();
  
              $("#highlight").animate({fontSize: '+=20%'}, 100, 'swing');
          }
      }
  
      hide_lines = function (event) {
          $(event.fragment).each(function(i, elem) {
              var code = $(this);
              var data_prettify = code.attr('data-prettify')
              var data_prettify_lines = code.attr('data-prettify_lines')
              if(data_prettify != undefined) {
                  var code_lines = data_prettify_lines.split(':')
                  var from = code_lines[0];
                  var to = code_lines[1];
  
                  var new_lines = ""
  
                  var code_block = $('#' + data_prettify);
  
                  var orig_code_id = 'code_' + data_prettify
                  var orig_code = $('#' + orig_code_id)
                  var text = ''
                  if(orig_code.length == 0) {
                      $('body').append('<' + 'code id="' + orig_code_id + '" style="display:none;"' + '>' + code_block.html() + '</' + 'code' + '>');
                      text = code_block.html();
                  }
                  else {
                      text = orig_code.html()
                  }
                  code_block.html(text);
                  prettify();
  
                  var previous_fragment = $(".present .fragment.visible").last();
                  highlight_fragment(previous_fragment);
              }
          })
      };
  
      restore_original = function(event) {
              code = $(event)
              var data_prettify = code.attr('data-prettify')
              if(data_prettify != undefined) {
                  var code_block = $('#' + data_prettify);
  
                  var orig_code_id = 'code_' + data_prettify
                  var orig_code = $('#' + orig_code_id)
                  var text = ''
                  if(orig_code.length == 0) {
                      $('body').append('<' + 'code id="' + orig_code_id + '" style="display:none;"' + '>' + code_block.html() + '</' + 'code' + '>');
                      text = code_block.html();
                  }
                  else {
                      text = orig_code.html()
                  }
                  code_block.html(text);
                  prettify();
      }
  
      function determine_left_padding(line) {
          for(i = 0; i < line.length; i++) {
              if(line.charAt(i) != ' ') {
                  return i
              }
          }
          return 0
      }
  
       Reveal.addEventListener( 'fragmentshown', show_lines);
       Reveal.addEventListener( 'fragmenthidden', hide_lines);
  
  });
</script>
  </div>
  <aside class='controls'>
    <a class='left'>&#x25C4;</a>
    <a class='right'>&#x25BA;</a>
    <a class='up'>&#x25B2;</a>
    <a class='down'>&#x25BC;</a>
  </aside>
  <div class='progress'>
    <span></span>
  </div>
</div>
    <script src='/presentations/javascripts/reveal.js' type='text/javascript'></script>
    <script src='/presentations/javascripts/classList.js' type='text/javascript'></script>
  </body>
</html>
